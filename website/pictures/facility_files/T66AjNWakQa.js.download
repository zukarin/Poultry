;/*FB_PKG_DELIM*/

__d("InstagramMediaProductTypeName",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum")({LIVE:"live",FEED:"feed",STORY:"story",DIRECT:"direct",IGTV:"igtv",NAMETAG:"nametag",DIRECT_AUDIO:"direct_audio",CAROUSEL_ITEM:"carousel_item",CAROUSEL_CONTAINER:"carousel_container",PROFILE_PIC:"profile_pic",AD:"ad",AR_EFFECT_PREVIEW:"ar_effect_preview",DIRECT_PERMANENT:"direct_permanent",SELFIE_STICKER:"selfie_sticker",COWATCH_LOCAL:"cowatch_local",CLIPS:"clips",GUIDE_MEDIA_FACADE:"guide_media_facade",FUNDRAISER_COVER:"fundraiser_cover",LIVE_ARCHIVE:"live_archive",HIGHLIGHT_POST_FACADE:"highlight_post_facade",DIRECT_THREAD:"direct_thread",SCHEDULED_LIVE:"scheduled_live",RATINGS_AND_REVIEWS:"ratings_and_reviews",DIRECT_HEADMOJI:"direct_headmoji",CLIPS_PREVIEW:"clips_preview",REPOST_MEDIA_FACADE:"repost_media_facade",STORY_INTERACTION_RESPONSE:"story_interaction_response",MEDIA_KIT:"media_kit",TEXT_POST:"text_post",NOTE_AUDIO:"note_audio",DIRECT_MESSAGE_COMMENT_FACADE:"direct_message_comment_facade"});c=a;f["default"]=c}),66);
__d("IGDThreadTTLCUtils",["IGDInstamadilloUtils","InstagramMediaProductTypeName","LSThreadBitOffset","ZenonRTWebBrowserFeatureSupport","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h=[225,235,226,227,228,229,230,231,232,233,234,236];function i(a,b){if(a==null||d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a))return!1;return!c("qex")._("954")?!1:d("LSThreadBitOffset").has(b,a)}function j(a){return i(a,225)}function k(a){if(!c("gkx")("2400"))return!1;return!d("ZenonRTWebBrowserFeatureSupport").isInsertableStreamsSupported()?!1:i(a,235)}function l(a){return i(a,226)}function m(a){return i(a,227)}function n(a){return i(a,228)}function o(a){return i(a,229)}function p(a){return i(a,230)}function q(a){return i(a,231)}function r(a){return i(a,232)}function s(a){return i(a,233)}function t(a){return i(a,234)}function u(a){return i(a,236)}function v(a){return a==null||d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a)||!c("qex")._("954")?!1:w(a)}function w(a){return a==null?!1:h.some(function(b){return d("LSThreadBitOffset").has(b,a)})}function a(a,b){var d=a.isDisappearingModeSettingOn,e=a.isTTLCClipEnabled,f=a.isTTLCGenericXMAShareEnabled,g=a.isTTLCMediaShareEnabled;a=a.isTTLCStoryShareEnabled;b=c("InstagramMediaProductTypeName").cast(b);if(b==null||d)return!1;if(!c("qex")._("954"))return!1;switch(b){case"feed":case"carousel_container":case"ad":return g;case"clips":return e;case"story":return a;case"live":return f;default:return!1}}function b(a){return new Map([["Text",j(a)],["Clip",l(a)],["Reel Share",m(a)],["Media Share",n(a)],["Story Share",o(a)],["Link",p(a)],["Generic XMA",q(a)],["Profile",u(a)],["Image",r(a)],["Video",s(a)],["Audio",t(a)],["Gif/Sticker/Avatar",void 0],["Raven",void 0],["Media Collection",void 0],["Calling",k(a)],["Rest of Message Types",void 0]])}function e(a){return{is_instamadillo_ttlc:String(v(a)),is_instamadillo_ttlc_audio:String(t(a)),is_instamadillo_ttlc_clip:String(l(a)),is_instamadillo_ttlc_generic_xma:String(q(a)),is_instamadillo_ttlc_image:String(r(a)),is_instamadillo_ttlc_link:String(p(a)),is_instamadillo_ttlc_media_share:String(n(a)),is_instamadillo_ttlc_profile:String(u(a)),is_instamadillo_ttlc_reel_share:String(m(a)),is_instamadillo_ttlc_story_share:String(o(a)),is_instamadillo_ttlc_text:String(j(a)),is_instamadillo_ttlc_video:String(s(a))}}function f(a){return{is_instamadillo_ttlc:v(a),is_instamadillo_ttlc_audio:t(a),is_instamadillo_ttlc_clip:l(a),is_instamadillo_ttlc_generic_xma:q(a),is_instamadillo_ttlc_image:r(a),is_instamadillo_ttlc_link:p(a),is_instamadillo_ttlc_media_share:n(a),is_instamadillo_ttlc_profile:u(a),is_instamadillo_ttlc_reel_share:m(a),is_instamadillo_ttlc_story_share:o(a),is_instamadillo_ttlc_text:j(a),is_instamadillo_ttlc_video:s(a)}}function x(a,b){if(a==null)return!1;switch(a.__typename){case"XMSGIgReceiverFetchXmaFeedFetchParams":return n(b);case"XMSGIgReceiverFetchXmaProfileFetchParams":return q(b);case"XMSGIgReceiverFetchXmaClipFetchParams":return l(b);default:return!1}}g.isInstamadilloTTLCTextEnabled=j;g.isInstamadilloTTLCCallingEnabled=k;g.isInstamadilloTTLCClipEnabled=l;g.isInstamadilloTTLCReelShareEnabled=m;g.isInstamadilloTTLCMediaShareEnabled=n;g.isInstamadilloTTLCStoryShareEnabled=o;g.isInstamadilloTTLCLinkEnabled=p;g.isInstamadilloTTLCGenericXmaEnabled=q;g.isInstamadilloTTLCImageEnabled=r;g.isInstamadilloTTLCVideoEnabled=s;g.isInstamadilloTTLCAudioEnabled=t;g.isInstamadilloTTLCProfileEnabled=u;g.isIGDTTLCEnabledForThread=v;g.threadHasInstamadilloTTLCCapability=w;g.isIGDTTLCEnabledForIGDCandidate=a;g.getTtlcMessageTypeMap=b;g.getTTLCLoggingExtraData=e;g.getTTLCBooleanAnnotations=f;g.isXmaReceiverFetchTTLCEnabled=x}),98);
__d("IGDInstamadilloUtils",["ExecutionEnvironment","IGDThreadTTLCUtils","LSThreadBitOffset","gkx","isInstamadillo","qex"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return(a==null?void 0:a.transportKey)==="Instamadillo"}function j(a){return a==null?!1:d("LSThreadBitOffset").has(214,a)}function a(a){return a==null?!1:d("LSThreadBitOffset").has(212,a)}function k(a){return a==null?!1:d("LSThreadBitOffset").has(38,a)}function b(a){return a==null?!1:d("LSThreadBitOffset").has(211,a)}function e(a){var b=j(a);a=l(a);return a||b}function l(a){if(c("gkx")("6650"))return!1;var b=k(a),e=j(a);a=d("IGDThreadTTLCUtils").threadHasInstamadilloTTLCCapability(a);return b&&(e||a)}function f(a,b){a=i(a)&&a.ephemeralExpirationTs!=null;return b&&a||!b&&!a}function m(a){a=i(a);return!a?!0:c("isInstamadillo")()}function n(){return c("qex")._("675")===!0||c("gkx")("6650")===!0}var o=function(){var a={browser:(h||(h=c("ExecutionEnvironment"))).isInBrowser,isLegacyArmadilloTLC:c("qex")._("121")===!0,isMobileDM:c("gkx")("2553"),isMobileInstamadilloTLC:c("gkx")("2322"),isMobileOrWebTTLC:c("gkx")("2406"),isWebTTLC:c("qex")._("954")===!0,sharedWorker:h.isInSharedWorker,worker:h.isInWorker},b="";a=Object.entries(a);for(var d=0;d<a.length;d++){var e=a[d],f=e[0];e=e[1];b+=f+": "+String(e)+"\n"}return b};g.isInstamadilloMessage=i;g.isInstamadilloCutover=j;g.isInstamadilloDMToggleEnabled=a;g.isIGDDisappearingModeEnabled=k;g.isInstamadilloTransportEnabled=b;g.isInstamadilloHardblockEnabled=e;g.isDMHardblockedEnabled=l;g.shouldRenderMessageReply=f;g.canMutateIGDMessage=m;g.isInstamadilloSecurityAlertsEnabled=n;g.getE2EEGatingStateAsString=o}),98);
__d("IGDRouteProvider.react",["I64","react","react-compiler-runtime","useCurrentRoute"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;f=e.createContext;var k=e.useContext;function l(a){try{return(i||(i=d("I64"))).of_string(a)}catch(a){return}}function m(a){if(a==null)return;a=a.params.thread_key;if(a!=null&&typeof a==="string")return l(a)}var n=f();function a(a){var b=d("react-compiler-runtime").c(5);a=a.children;var e=c("useCurrentRoute")(),f;b[0]!==e?(f=m(e),b[0]=e,b[1]=f):f=b[1];e=f;b[2]!==a||b[3]!==e?(f=j.jsx(n.Provider,{value:e,children:a}),b[2]=a,b[3]=e,b[4]=f):f=b[4];return f}function b(){return k(n)}g.IGDRouteContextProvider=a;g.useThreadKeyFromCurrentRoute=b}),98);
__d("IGDInteractionTraceAnnotations",["I64","IGDInstamadilloUtils","IGDRouteProvider.react","IGDThreadTTLCUtils","Int64Hooks","InteractionTracing","LSIntEnum","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useEffect;function a(a){return babelHelpers["extends"]({},d("IGDThreadTTLCUtils").getTTLCBooleanAnnotations(a),{is_dm:d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a),is_instamadillo:d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(a),is_instamadillo_tlc:d("IGDInstamadilloUtils").isInstamadilloCutover(a)})}function l(a,b){var c=d("IGDInstamadilloUtils").isInstamadilloCutover(a),e=d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(a),f=d("IGDInstamadilloUtils").isIGDDisappearingModeEnabled(a);b.addAnnotationBoolean("is_instamadillo",e);b.addAnnotationBoolean("is_instamadillo_tlc",c);b.addAnnotationBoolean("is_dm",f);b.addAnnotationBoolean("is_instamadillo_ttlc",(e=d("IGDThreadTTLCUtils")).isIGDTTLCEnabledForThread(a));b.addAnnotationBoolean("is_instamadillo_ttlc_audio",e.isInstamadilloTTLCAudioEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_clip",e.isInstamadilloTTLCClipEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_generic_xma",e.isInstamadilloTTLCGenericXmaEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_image",e.isInstamadilloTTLCImageEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_link",e.isInstamadilloTTLCLinkEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_media_share",e.isInstamadilloTTLCMediaShareEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_profile",e.isInstamadilloTTLCProfileEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_reel_share",e.isInstamadilloTTLCReelShareEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_story_share",e.isInstamadilloTTLCStoryShareEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_text",e.isInstamadilloTTLCTextEnabled(a));b.addAnnotationBoolean("is_instamadillo_ttlc_video",e.isInstamadilloTTLCVideoEnabled(a))}function b(a){var b=d("react-compiler-runtime").c(3),e,f;b[0]!==a?(e=function(){c("InteractionTracing").getPendingInteractions().forEach(function(b){l(a,b)})},f=[a],b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);d("Int64Hooks").useEffectInt64(e,f)}var m=new Set();function e(a){var b=d("react-compiler-runtime").c(7),e;b[0]!==a.consistentThreadFbid||b[1]!==a.threadKey||b[2]!==a.threadSubtype||b[3]!==a.threadType?(e=function(){var b=(i||(i=d("I64"))).to_string(a.threadKey);c("InteractionTracing").getPendingInteractions().forEach(function(c){var e=m.has(b);c.addAnnotationBoolean("is_thread_visited",e);c.addAnnotation("thread_key",(i||(i=d("I64"))).to_string(a.threadKey));a.consistentThreadFbid!=null&&c.addAnnotation("consistent_thread_fbid",(i||(i=d("I64"))).to_string(a.consistentThreadFbid));c.addAnnotationInt("thread_type",(j||(j=d("LSIntEnum"))).toNumber(a.threadType));a.threadSubtype!=null&&c.addAnnotation("thread_subtype",(i||(i=d("I64"))).to_string(a.threadSubtype))});return function(){m.add(b)}},b[0]=a.consistentThreadFbid,b[1]=a.threadKey,b[2]=a.threadSubtype,b[3]=a.threadType,b[4]=e):e=b[4];var f;b[5]!==a?(f=[a],b[5]=a,b[6]=f):f=b[6];d("Int64Hooks").useEffectInt64(e,f)}function f(){var a=d("react-compiler-runtime").c(5),b=d("IGDRouteProvider.react").useThreadKeyFromCurrentRoute(),e;a[0]!==b?(e=b!=null?(i||(i=d("I64"))).to_string(b):null,a[0]=b,a[1]=e):e=a[1];var f=e;a[2]!==f?(b=function(){c("InteractionTracing").getPendingInteractions().forEach(function(a){if(f==null){a.addAnnotationInt("rendered_direct_null_state",1);a.addAnnotationInt("has_thread_key",0);return}a.addAnnotationInt("has_thread_key",1);a.addAnnotationInt("rendered_direct_null_state",0)})},e=[f],a[2]=f,a[3]=b,a[4]=e):(b=a[3],e=a[4]);k(b,e)}g.getInstamadilloBooleanAnnotations=a;g.addInstamadilloAnnotationsToInteractionTrace=l;g.useAddInstamadilloAnnotationsToInteractionTraces=b;g.useAddThreadAnnotationToInteractionTraces=e;g.useAddThreadRouteAnnotations=f}),98);
__d("LSOnSendMessageFailure.nop",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d,e){return(g||(g=b("Promise"))).resolve()}f["default"]=a}),66);
__d("LSMarkOptimisticMessageFailed",["LSOnSendMessageFailure.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return a[2]===!0?d[0]=c.i64.cast([0,5]):d[0]=c.i64.cast([0,4]),a[2]===!0?d[1]=c.i64.cast([0,5]):d[1]=c.i64.cast([0,4]),a[2]===!0?d[2]=c.i64.cast([0,5]):d[2]=c.i64.cast([0,4]),c.nativeOperation(b("LSOnSendMessageFailure.nop"),a[0],a[1])},function(b){return c.forEach(c.filter(c.db.table(12).fetch([[[a[0]]],"optimistic"]),function(b){return b.offlineThreadingId===a[0]&&c.i64.eq(b.authorityLevel,c.i64.cast([0,20]))}),function(a){var b=a.update;a.item;return b({sendStatus:d[0],sendStatusV2:d[1]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxMarkOptimisticMessageFailedStoredProcedure";a.__tables__=["messages"];e.exports=a}),null);
__d("LSMarkOptimisticMessageFailedStoredProcedure",["LSMarkOptimisticMessageFailed","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSMarkOptimisticMessageFailed"),e.optimisticMid,e.errorMessage,e.isRetryable);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSThreadAttributionTypeUtil",["I64","LSIntEnum","LSMessagingThreadAttributionType","LSThreadAttributionStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){b=d("LSThreadAttributionStore").getSource({type:"MWLSEntrypoint",value:b},(h||(h=d("I64"))).to_string(a));if(b.type==="LSThreadAttribution")return b.value;a=b.value;if(a==="communityFriendsDialog"||a==="pagesHomeFriendsDialog"||a==="mutualFriendsDialog"||a==="birthday"||a==="groupMembers"||a==="fundraiserSupportersList"||a==="memories"||a==="feedPoll"||a==="reactorList"||a==="friendsList"||a==="pagesPrivateReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST);else if(a==="inboxPendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_PENDING_REQUESTS);else if(a==="fullscreenChat")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT);else if(a==="sidebarGroupsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_GROUPS);else if(a==="jewel")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_THREAD_LIST);else if(a==="shop")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MINI_SHOP_VIEW_MENU_BUTTON);else if(a==="chatheadsOverflow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_OVERFLOW);else if(a==="hovercard"||a==="feedDynamicHoverCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_DYNAMIC_HOVER_CARD);else if(a==="search"||a==="messengerUniversalSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_UNIVERSAL_SEARCH);else if(a==="story"||a==="storyAggregatedUsers"||a==="storySeenByList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY);else if(a==="timeline"||a==="feedOrganicPost")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST);else if(a==="pageAboutCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_ABOUT_CARD);else if(a==="inboxInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_IN_THREAD);else if(a==="notificationInThreadReply")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_NOTIFICATION_IN_THREAD_REPLY);else if(a==="archieve")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_ARCHIVED_THREADS);else if(a==="storyViewerSheetRow")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_STORY_VIEWER_SHEET_ROW);else if(a==="chatheadsNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS_NEW_MESSAGE);else if(a==="event")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_EVENT);else if(a==="jewelSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_SEARCH);else if(a==="inboxSpam"||a==="inboxThreadList"||a==="inboxRestricted")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX);else if(a==="jewelNewMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NEW_MESSAGE);else if(a==="pendingRequests")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST);else if(a==="sidebarSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_SEARCH);else if(a==="inboxRemainingThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_REMAINING_THREADS);else if(a==="pagesHeader")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON);else if(a==="inboxRecentThreads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_RECENT_THREADS);else if(a==="chatheads")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CHATHEADS);else if(a==="pageResponsivenessCard")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_PAGE_RESPONSIVENESS_CONTEXT_CARD);else if(a==="inboxSearch")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_MESSAGE_SEARCH);else if(a==="jewelNestedFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").JEWEL_NESTED_FOLDER);else if(a==="marketplace")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MARKETPLACE_SEND_MESSAGE);else if(a==="feedOrganicPostViewAndMessage")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE);else if(a==="adsCta")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA);else if(a==="chatInThread")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_CHAT_IN_THREAD);else if(a==="payments")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").PAYMENTS);else if(a==="inboxFolder")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_NESTED_FOLDER);else if(a==="inboxArchived")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ARCHIVED_THREADS);else if(a==="inboxActiveContacts")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").MESSENGER_INBOX_ACTIVE_CONTACTS);else if(a==="sidebarContactsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_LIST);else if(a==="sidebarCommunityChatsList")return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_COMMUNITY_CHATS);else return(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessagingThreadAttributionType").UNKNOWN)}g.getSource=a}),98);
__d("MAWMarkMessageSendAsFailedLSDB",["LSFactory","LSMarkOptimisticMessageFailedStoredProcedure","Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,d,e,f,g){return(d=f==null?void 0:f.runInTransaction(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield c("LSMarkOptimisticMessageFailedStoredProcedure")(c("LSFactory")(b),{errorMessage:e,isRetryable:g,optimisticMid:a})});return function(a){return d.apply(this,arguments)}}(),"readwrite"))!=null?d:(h||(h=b("Promise"))).resolve()}g.markMessageSendAsFailed=a}),98);
__d("MWGetOriginalEntrypoint",["I64","InteractionTracingMetrics","MWChatInteraction"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,e=d("MWChatInteraction").get((h||(h=d("I64"))).to_string(a));e=e!=null?c("InteractionTracingMetrics").get(e):null;e=(b=e==null?void 0:(b=e.annotations.string)==null?void 0:b.inboxEntrypoint)!=null?b:e==null?void 0:(b=e.annotations.string)==null?void 0:b.entrypoint;if(e!=null&&e!=="unknown")return e;b=d("MWChatInteraction").get("inbox_init");if(b!=null&&(h||(h=d("I64"))).equal(a,(h||(h=d("I64"))).of_string(b)))return"initInbox";e=d("MWChatInteraction").get(d("MWChatInteraction").MW_AUTO_CHAT_TAB_OPEN);b=e!=null?(b=c("InteractionTracingMetrics").get(e))==null?void 0:(e=b.annotations.string)==null?void 0:e.thread_id:null;return b===(h||(h=d("I64"))).to_string(a)?"auto_open":"unknown"}g["default"]=a}),98);
__d("MWHasLinksUtil",["URLMatcher","isStringNullOrEmpty"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return c("isStringNullOrEmpty")(a)?!1:c("URLMatcher").match(a)!=null}g.getHasLinks=a}),98);
__d("MWLogSendToSentFailedError",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f){var g;g=a==null?void 0:(g=a.annotations)==null?void 0:(g=g.bool)==null?void 0:g.is_secure;c("FBLogger")("messenger_web_messaging","send_to_sent_failed").blameToPreviousFrame().blameToPreviousFrame().warn("send_to_sent failed with reason: %s. Caught error message: %s. Additional description: %s. Secure? %s. Error Code: %s. Application Error: %s.",b,(b=d==null?void 0:d.message)!=null?b:"",(a=(d=a==null?void 0:(d=a.annotations)==null?void 0:(b=d.string)==null?void 0:b.error_description)!=null?d:a==null?void 0:(b=a.annotations)==null?void 0:(d=b.string)==null?void 0:d.errorType)!=null?a:"",g===!0?"secure":g===!1?"open":"unknown",(b=e==null?void 0:e.toString())!=null?b:"",(d=f==null?void 0:f.toString())!=null?d:"")}g["default"]=a}),98);
__d("MWMsgMediaTypeLogUtils",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";var g=b("$InternalEnum")({Application:"application",Audio:"audio",Avatar:"avatar",HotEmoji:"hot_emoji",File:"file",Gif:"gif",Image:"image",Link:"link",None:"none",Poll:"poll",Reaction:"reaction",Sticker:"sticker",Video:"video",Share:"share"});function a(a){var b=a.hasFile;b=b===void 0?!1:b;var c=a.hasGif;c=c===void 0?!1:c;var d=a.hasHotEmoji;d=d===void 0?!1:d;var e=a.hasImage;e=e===void 0?!1:e;var f=a.hasLinks;f=f===void 0?!1:f;var h=a.hasShare;h=h===void 0?!1:h;var i=a.hasSticker;i=i===void 0?!1:i;var j=a.hasVideo;j=j===void 0?!1:j;a=a.hasVoiceClip;a=a===void 0?!1:a;var k=g.None;e?k=g.Image:j?k=g.Video:d?k=g.HotEmoji:i?k=g.Sticker:c?k=g.Gif:a?k=g.Audio:f?k=g.Link:b?k=g.File:h&&(k=g.Share);return k}f.AttachmentType=g;f.getAttachmentType=a}),66);
__d("MWVersion",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("I64")).of_string("2");g.v2=a}),98);
__d("MWSharedMsgLogUtils",["$InternalEnum","I64","IGDInteractionTraceAnnotations","LSIntEnum","LSMessagingThreadAttributionType","LSMessagingThreadTypeUtil","MAWEBSwitch","MWGetOriginalEntrypoint","MWHasLinksUtil","MWMsgMediaTypeLogUtils","MWVersion","MultipleTabsLogger","asyncToGeneratorRuntime","cr:6985","gkx","isArmadillo","isStringNullOrEmpty","promiseDone","shouldUseMAWSharedWorker"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("$InternalEnum")({Send:"send",Reaction:"reaction",Reply:"reply",Forward:"forward",Share:"share",StoryReply:"story-reply",Unsend:"unsend",GroupInvite:"group-invite",SenderKeyDistribution:"sender-key-distribution",EphemeralSetting:"ephemeral-setting"}),k=b("$InternalEnum")({Text:"text",NonText:"non-text"});function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=a.hasAttachment,g=a.hasEphemeralSetting,i=a.hasGroupInvite,l=a.hasReaction,m=a.hasReply,n=a.hasSenderKeyDistribution,p=a.hasStoryReply,q=a.hasText,r=a.isUnsend;a=babelHelpers.objectWithoutPropertiesLoose(a,["hasAttachment","hasEphemeralSetting","hasGroupInvite","hasReaction","hasReply","hasSenderKeyDistribution","hasStoryReply","hasText","isUnsend"]);var s=j.Send;m?s=j.Reply:p?s=j.StoryReply:r?s=j.Unsend:l?s=j.Reaction:i?s=j.GroupInvite:g?s=j.EphemeralSetting:n&&(s=j.SenderKeyDistribution);m=d("MWMsgMediaTypeLogUtils").getAttachmentType(a);p=q&&(!m||m===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?k.Text:k.NonText;return{bool:{has_attachment:f,has_sticker:a.hasSticker,is_attachments_grouped:a.isAttachmentsGrouped,is_eb_enabled:c("MAWEBSwitch").isEnabled(),is_pdb:Boolean(c("gkx")("8483")),is_tlc_public_user:c("gkx")("24028"),use_maw_shared_worker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()},"int":{number_of_attachments:a.numberOfAttachments,number_of_grouped_attachments:a.numberOfGroupedAttachments},string:{action_type:s,attachment_type:m,entrypoint:o(b),message_type:p,multipleTabs:yield d("MultipleTabsLogger").getMultipleTabsAnnotation(),mw_version:(h||(h=d("I64"))).to_string(d("MWVersion").v2),root_component:e}}});return m.apply(this,arguments)}function a(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){var i=b("cr:6985")!=null?yield b("cr:6985").isCutoverThreadKey(a.threadKey):!1;e=(yield l(e,f,g));return{bool:babelHelpers["extends"]({},e.bool,d("IGDInteractionTraceAnnotations").getInstamadilloBooleanAnnotations(a),{is_community_event:a.eventStartTimestampMs!=null,is_cutover:c("isArmadillo")()&&i,is_message_request:d("LSMessagingThreadTypeUtil").isMessageRequest(a),is_secure:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)}),"int":babelHelpers["extends"]({},e["int"]),string:babelHelpers["extends"]({},e.string,{consistent_thread_fbid:a.consistentThreadFbid!=null?(h||(h=d("I64"))).to_string(a.consistentThreadFbid):null,original_entrypoint:c("MWGetOriginalEntrypoint")(a.threadKey),thread_id:(h||(h=d("I64"))).to_string(a.threadKey),thread_subtype:a.threadSubtype!=null?(h||(h=d("I64"))).to_string(a.threadSubtype):null,thread_type:h.to_string(a.threadType)})}});return n.apply(this,arguments)}function e(a,e,f,g){var i=e.hasFile;i=i===void 0?!1:i;var l=e.hasGif;l=l===void 0?!1:l;var m=e.hasHotEmoji;m=m===void 0?!1:m;var n=e.hasImage;n=n===void 0?!1:n;var o=e.hasLinks;o=o===void 0?!1:o;var p=e.hasReply;p=p===void 0?!1:p;var q=e.hasShare;q=q===void 0?!1:q;var r=e.hasSticker;r=r===void 0?!1:r;var s=e.hasStoryReply;s=s===void 0?!1:s;var t=e.hasText;t=t===void 0?!1:t;var u=e.hasVideo;u=u===void 0?!1:u;var v=e.hasVoiceClip;v=v===void 0?!1:v;var w=e.isAttachmentsGrouped,x=e.numberOfAttachments;x=x===void 0?0:x;e=e.numberOfGroupedAttachments;e=e===void 0?0:e;var y=j.Send;p?y=j.Reply:s&&(y=j.StoryReply);p=d("MWMsgMediaTypeLogUtils").getAttachmentType({hasFile:i,hasGif:l,hasHotEmoji:m,hasImage:n,hasLinks:o,hasShare:q,hasSticker:r,hasVideo:u,hasVoiceClip:v,numberOfAttachments:x,numberOfGroupedAttachments:e});s=t&&(!p||p===d("MWMsgMediaTypeLogUtils").AttachmentType.None)?k.Text:k.NonText;d("MultipleTabsLogger").addAnnotationWithInteractionUuid(a.getTraceId());a.addAnnotation("attachment_type",p);a.addAnnotation("action_type",y);a.addAnnotation("message_type",s);a.addAnnotation("original_entrypoint",c("MWGetOriginalEntrypoint")(f.threadKey));g!=null&&a.addAnnotation("root_component",g);a.addAnnotationInt("number_of_attachments",x);w!=null&&a.addAnnotationBoolean("is_attachments_grouped",w);a.addAnnotation("thread_id",(h||(h=d("I64"))).to_string(f.threadKey));f.consistentThreadFbid!=null&&a.addAnnotation("consistent_thread_fbid",(h||(h=d("I64"))).to_string(f.consistentThreadFbid));a.addAnnotation("thread_type",h.to_string(f.threadType));f.threadSubtype!=null&&a.addAnnotation("thread_subtype",(h||(h=d("I64"))).to_string(f.threadSubtype));b("cr:6985")!=null&&c("promiseDone")(b("cr:6985").isCutoverThreadKey(f.threadKey),function(b){a.addAnnotationBoolean("is_cutover",b)});d("IGDInteractionTraceAnnotations").addInstamadilloAnnotationsToInteractionTrace(f,a);a.addAnnotationBoolean("is_secure",d("LSMessagingThreadTypeUtil").isArmadilloSecure(f.threadType));a.addAnnotationBoolean("is_eb_enabled",c("MAWEBSwitch").isEnabled());a.addAnnotationBoolean("use_maw_shared_worker",d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker());a.addAnnotationBoolean("is_pdb",Boolean(c("gkx")("8483")))}function f(a){var b=a.externalAttachmentUrl,e=a.hotEmojiSize,f=a.isEphemeralSetting,g=a.isGroupInvite,h=a.isReaction,i=a.isSenderKeyDistribution,j=a.isUnsend,k=a.mediaGroupInfo,l=a.mediaStagings,m=a.messageText,n=a.reply,o=a.sentFromShareSheet,p=a.stickerId,q=a.threadType;a=a.voiceClip;var r=!c("isStringNullOrEmpty")(m);m=d("MWHasLinksUtil").getHasLinks(m);var s=!1;a=a!=null;a?s=!0:b!=null&&(s=!0);var t=!1,u=!1,v=!1,w=0,x=0,y;if(l!=null&&l.length>0){s=!0;for(var z of l){var A=z.mimeType;A.indexOf("image")!==-1&&(t=!0);A.indexOf("video")!==-1&&(u=!0);A.indexOf("application")!==-1&&(v=!0)}if(t&&q!=null){A=d("LSMessagingThreadTypeUtil").isArmadilloSecure(q);y=!A||c("gkx")("5318")===!0}w=l.length}k!=null&&(y=!0,x=k.messagesAndAttachments.length);z=e!=null;q=n!=null;A=n!=null;l=p!=null&&!z;k=!l&&b!=null;e=o===!0;n=h===!0;p=g===!0;b=f===!0;o=i===!0;return{hasAttachment:s,hasEphemeralSetting:b,hasFile:v,hasGif:k,hasGroupInvite:p,hasHotEmoji:z,hasImage:t,hasLinks:m,hasReaction:n,hasReply:q,hasSenderKeyDistribution:o,hasShare:e,hasSticker:l,hasStoryReply:A,hasText:r,hasVideo:u,hasVoiceClip:a,isAttachmentsGrouped:y,isUnsend:(h=j)!=null?h:!1,numberOfAttachments:w,numberOfGroupedAttachments:x}}function o(a){var b;return(b=Object.keys(c("LSMessagingThreadAttributionType")).find(function(b){return c("LSMessagingThreadAttributionType")[b]===a}))!=null?b:"UNKNOWN"}function p(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(2)))return"media";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4)))return"audio";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(4096))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(134217728)))return"sticker";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(16384)))return"gif";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(64)))return"file";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1)))return"text";else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(1024))||(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(536870912)))return"XMA";else return"unknown"}g.ActionType=j;g.MsgType=k;g.getSendToSentBaseAnnotations=l;g.getSendToSentAnnotations=a;g.addSendMessageMetadataForInteractionTrace=e;g.getMessageTypeParams=f;g.getEntrypointAnnotation=o;g.getMessageTypeFromDisplayedContentType=p}),98);
__d("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EE").__setRef("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred");g["default"]=a}),98);
__d("sendToSentQPLLogger",["LSDatabaseSingleton","LSIntEnum","MAWWaitForBackendSetup","MWLogSendToSentFailedError","MWSharedMsgLogUtils","QPLUserFlow","QuickPerformanceLogger","Random","ReQL","WAExceededStorageQuota","WAGetSafeQPLError","WAGetStorageQplAnnotations","asyncToGeneratorRuntime","gkx","mergeDeep","performance","promiseDone","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=c("qpl")._(25313175,"1551");function m(a,b){c("QPLUserFlow").addAnnotations(l,b,{instanceKey:a})}function a(a,b){c("QPLUserFlow").endCancel(l,{annotations:(b=b)!=null?b:{},instanceKey:a})}function e(a,b,e,f){b=f!=null?f.type:b;c("MWLogSendToSentFailedError")((j||(j=c("QuickPerformanceLogger"))).getMarker(l,a),b,e,f==null?void 0:f.errorCode,f==null?void 0:f.applicationErrorCode);c("QPLUserFlow").endFailure(l,b,{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota(),useSentBytesCache:c("gkx")("33008"),wasBackendSetupReset:d("MAWWaitForBackendSetup").wasBackendSetupReset()},string:{errorDescription:d("WAGetSafeQPLError").getSafeQPLErrorMessage(e)}},error:e,instanceKey:a})}function f(a,b,d,e){a!=null&&c("QPLUserFlow").addPoint(l,b,{data:e,debugInfo:d,instanceKey:a})}function n(a){a===void 0&&(a=!0);var b=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);c("QPLUserFlow").start(l,{annotations:{bool:{backendSetupReady:d("MAWWaitForBackendSetup").isBackendSetupSuccessful(),useArrayBufferFallback:c("gkx")("2348"),useMark405AsSuccess:c("gkx")("2403")},"int":{timeMsSinceSessionStart:(k||(k=c("performance"))).now()},string:{hostname:window.location.hostname}},instanceKey:b});a&&c("promiseDone")(d("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(a){m(b,a)}));c("promiseDone")((h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(a){return d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.tables.connectivity_status)).then(function(a){if(!a)return;m(b,{"int":{internetConnectionState:(i||(i=d("LSIntEnum"))).toNumber(a.internetConnectionState)}})})}));return b}function o(a){c("QPLUserFlow").endSuccess(l,{annotations:{bool:{exceededStorageQuota:d("WAExceededStorageQuota").getExceededStorageQuota()}},instanceKey:a})}function p(a,b,e,f,g){g===void 0&&(g=!0);var h=n(g);if(a==null)return h;g=d("MWSharedMsgLogUtils").getMessageTypeParams(babelHelpers["extends"]({},b,{threadType:a.threadType}));c("promiseDone")(d("MWSharedMsgLogUtils").getSendToSentAnnotations(a,g,e),function(a){a=c("mergeDeep")(a,f);m(h,a)});return h}var q=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){var e=a+"_start";a=a+"_end";c("QPLUserFlow").addPoint(l,e,{instanceKey:b});e=(yield d());c("QPLUserFlow").addPoint(l,a,{instanceKey:b});return e});return function(b,c,d){return a.apply(this,arguments)}}();g.addSendToSentAnnotations=m;g.markSendToSentCancel=a;g.markSendToSentFail=e;g.markSendToSentPoint=f;g.markSendToSentStart=n;g.markSendToSentSuccess=o;g.markSendToSentStartWithAnnotation=p;g.measureSendToSentPerformance=q}),98);