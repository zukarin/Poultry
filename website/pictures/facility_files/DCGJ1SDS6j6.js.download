;/*FB_PKG_DELIM*/

__d("useMAWLoadMoreCutoverThreadFileAttachments",["MAWDbMsg","MWSharedAttachmentsSectionHooks","gkx","justknobx","react","react-compiler-runtime","useLoadMoreThreadSharedAttachments.react","useMAWLoadMoreThreadSharedAttachments","useMWMediaLoadingQplLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(a,b,e,f,g,h,j){var k,l=d("react-compiler-runtime").c(45),m=d("MWSharedAttachmentsSectionHooks").useQueryFileAttachments(a),n=m[0],o=m[1],p=m[2],q=m[3];m=m[4];var r;l[0]!==(p==null?void 0:p.lastLoadedMessageId)?(r=(p==null?void 0:p.lastLoadedMessageId)!=null?d("MAWDbMsg").toMsgId(p==null?void 0:p.lastLoadedMessageId):void 0,l[0]=p==null?void 0:p.lastLoadedMessageId,l[1]=r):r=l[1];r=r;k=(k=m)!=null?k:!0;var s;l[2]!==f||l[3]!==e?(s={entrypoint:f,threadType:e},l[2]=f,l[3]=e,l[4]=s):s=l[4];var t=c("useMWMediaLoadingQplLogger")(s);l[5]!==t?(f=function(){t.logLoadMediaStart({isCutoverThread:!0,isPreCutoverMedia:!1})},l[5]=t,l[6]=f):f=l[6];e=f;f=c("useMAWLoadMoreThreadSharedAttachments")(a,m,q,(s=r)!=null?s:void 0,e,g,j);a=d("MWSharedAttachmentsSectionHooks").useQueryFileAttachments(b);m=a[0];q=a[2];r=a[4];l[7]===Symbol["for"]("react.memo_cache_sentinel")?(s=c("justknobx")._("2967"),l[7]=s):s=l[7];e=s;j=((g=r)!=null?g:c("gkx")("6241"))?e:!1;l[8]!==t?(a=function(){t.logLoadMediaStart({isCutoverThread:!0,isPreCutoverMedia:!0})},l[8]=t,l[9]=a):a=l[9];s=a;r=c("useLoadMoreThreadSharedAttachments.react")(o,b,s);l[10]!==p||l[11]!==n||l[12]!==k||l[13]!==f||l[14]!==t.logLoadMediaCancel||l[15]!==t.logLoadMediaSuccess?(g={attachmentsRange:p,hasMore:k,loadMore:f,logLoadMediaCancel:t.logLoadMediaCancel,logLoadMediaSuccess:t.logLoadMediaSuccess,media:n},l[10]=p,l[11]=n,l[12]=k,l[13]=f,l[14]=t.logLoadMediaCancel,l[15]=t.logLoadMediaSuccess,l[16]=g):g=l[16];e=d("MWSharedAttachmentsSectionHooks").useLoader(g);a=e[0];o=e[1];b=e[2];s=k||a;l[17]!==q||l[18]!==m||l[19]!==j||l[20]!==r||l[21]!==t.logLoadMediaCancel||l[22]!==t.logLoadMediaSuccess||l[23]!==s?(p={attachmentsRange:q,hasMore:j,loadMore:r,logLoadMediaCancel:t.logLoadMediaCancel,logLoadMediaSuccess:t.logLoadMediaSuccess,media:m,skipInitialLoad:s},l[17]=q,l[18]=m,l[19]=j,l[20]=r,l[21]=t.logLoadMediaCancel,l[22]=t.logLoadMediaSuccess,l[23]=s,l[24]=p):p=l[24];f=d("MWSharedAttachmentsSectionHooks").useLoader(p);g=f[0];e=f[1];q=f[2];if(k||a||h===!0){l[25]!==b||l[26]!==n||l[27]!==k||l[28]!==a||l[29]!==o?(r={attachments:n,completedFirstLoad:b,hasMore:k,isLoadingMore:a,onLoadMore:o},l[25]=b,l[26]=n,l[27]=k,l[28]=a,l[29]=o,l[30]=r):r=l[30];return r}else if(j||g){l[31]!==m||l[32]!==n?(s=n.concat(m),l[31]=m,l[32]=n,l[33]=s):s=l[33];l[34]!==q||l[35]!==j||l[36]!==g||l[37]!==e||l[38]!==s?(p={attachments:s,completedFirstLoad:q,hasMore:j,isLoadingMore:g,onLoadMore:e},l[34]=q,l[35]=j,l[36]=g,l[37]=e,l[38]=s,l[39]=p):p=l[39];return p}else{l[40]!==m||l[41]!==n?(f=n.concat(m),l[40]=m,l[41]=n,l[42]=f):f=l[42];l[43]!==f?(h={attachments:f,completedFirstLoad:!0,hasMore:!1,isLoadingMore:!1,onLoadMore:i},l[43]=f,l[44]=h):h=l[44];return h}}function i(){}g["default"]=a}),98);
__d("MAWCutoverInboxInfoSharedFilesTab.react",["FBLogger","I64","LSThreadMediaGalleryGroup","MAWThreadCutover","MWInboxInfoFileGallery.react","justknobx","react","react-compiler-runtime","useMAWLoadMoreCutoverThreadFileAttachments","useMAWResetAttachmensRangeOnUnmount"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));b=h;var k=b.useEffect,l=b.useRef;function a(a){var b=d("react-compiler-runtime").c(15),e=a.backupState,f=a.isRestoringFromEB,g=a.onFirstLoadedMedia,h=a.secureThreadKey;a=a.threadType;var m=d("MAWThreadCutover").useGetCutoverOpenThreadKey(h);m==null&&c("FBLogger")("messenger_web_media").mustfix("Cutover open thread key is null for secure thread key: %s",(i||(i=d("I64"))).to_string(h));var n;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(n=c("justknobx")._("1132"),b[0]=n):n=b[0];m=c("useMAWLoadMoreCutoverThreadFileAttachments")(h,(m=m)!=null?m:(i||(i=d("I64"))).zero,a,"file_gallery",c("LSThreadMediaGalleryGroup").FILES_ONLY,f,n);var o=m.attachments,p=m.completedFirstLoad;n=m.hasMore;var q=m.isLoadingMore;m=m.onLoadMore;var r=l(!1),s,t;b[1]!==o||b[2]!==p||b[3]!==g?(s=function(){r.current===!1&&p===!0&&(r.current=!0,g(o))},t=[p,o,g],b[1]=o,b[2]=p,b[3]=g,b[4]=s,b[5]=t):(s=b[4],t=b[5]);k(s,t);c("useMAWResetAttachmensRangeOnUnmount")(h,c("LSThreadMediaGalleryGroup").FILES_ONLY);b[6]!==o||b[7]!==e||b[8]!==n||b[9]!==q||b[10]!==f||b[11]!==m||b[12]!==h||b[13]!==a?(s=j.jsx(c("MWInboxInfoFileGallery.react"),{backupState:e,files:o,hasMore:n,isLoading:q,isRestoringFromEB:f,onLoadMore:m,threadKey:h,threadType:a}),b[6]=o,b[7]=e,b[8]=n,b[9]=q,b[10]=f,b[11]=m,b[12]=h,b[13]=a,b[14]=s):s=b[14];return s}g["default"]=a}),98);