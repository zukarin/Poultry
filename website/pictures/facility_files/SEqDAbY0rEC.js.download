;/*FB_PKG_DELIM*/

__d("MWChatEncryptedBackupsUpsellMessengerInboxQuery.graphql",["MWChatEncryptedBackupsUpsellMessengerInboxQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:!1,kind:"LocalArgument",name:"doesUserHaveAnEB"},c={defaultValue:!1,kind:"LocalArgument",name:"isEBWebOnlyOnboardingEnabled"},d={alias:null,args:null,kind:"ScalarField",name:"is_eb_restore_upsells_dismissed",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[a,c],kind:"Fragment",metadata:null,name:"MWChatEncryptedBackupsUpsellMessengerInboxQuery",selections:[{condition:"doesUserHaveAnEB",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"MWEBRestoreInterstitialDialogWrapper_query"}]},{condition:"isEBWebOnlyOnboardingEnabled",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"MWEBOnboardingInterstitialDialogWrapper_query"}]},{args:null,kind:"FragmentSpread",name:"useEncryptedBackupsProcessStatePreLoaded_query"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null},{kind:"ClientExtension",selections:[d]}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,a],kind:"Operation",name:"MWChatEncryptedBackupsUpsellMessengerInboxQuery",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null},d]},{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{condition:"doesUserHaveAnEB",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},e],storageKey:null},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null},e],storageKey:null}],storageKey:null}]},{condition:"isEBWebOnlyOnboardingEnabled",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_onboarding_softblocks",plural:!1,selections:[{args:null,documentName:"MWEBOnboardingInterstitialDialogWrapper_query",fragmentName:"MWEBOnboardingVariantInterstitialDialogChooser_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eb_onboarding_upsells_dismissed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_eb_onboarding_softblocks_dismissed",storageKey:null}]}],storageKey:null}]}]},params:{id:b("MWChatEncryptedBackupsUpsellMessengerInboxQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsUpsellMessengerInboxQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWXDialogPageLoadingState.react",["cr:6995","cr:9910","emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var e=d("react-compiler-runtime").c(4);a=a.onClose;if(b("cr:9910")!=null){var f;f=(f=a)!=null?f:c("emptyFunction");var g;e[0]!==f?(g=i.jsx(b("cr:9910"),{onClose:f}),e[0]=f,e[1]=g):g=e[1];return g}if(b("cr:6995")!=null){e[2]!==a?(f=i.jsx(b("cr:6995"),{onClose:a}),e[2]=a,e[3]=f):f=e[3];return f}return null}g["default"]=a}),98);
__d("MWChatEncryptedBackupsUpsellMessengerInbox.react",["BaseModal.react","CometPageletWithDiv.react","CometPlaceholder.react","CometRelay","InteractionTracing.xplat","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsUpsellMessengerInboxQuery.graphql","MWEBEntrypointsKillswitch.enum","MWEBUpsellDismissedEnum.facebook","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","MWXDialogPageLoadingState.react","MWXMultiStepDialog.react","ReQL","ReQLSuspense","cr:4181","cr:8727","promiseDone","react","react-compiler-runtime","useEncryptedBackupsProcessStatePreLoaded","useHasRestoreInterstitialSoftblockBeenDismissed","useMWChatEncryptedBackupsVestaUserInfo","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useEffect,n=e.useMemo,o=e.useRef,p=e.useState,q=b("cr:8727")!=null;function r(a){c("promiseDone")(d("MWEncryptedBackupsSharedState").upsertEBSharedStateEntry({db:a,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").INTERSTITIAL_DIALOG_VERIFY_DEVICE_NUX_DISMISSED}))}function s(a){var b=d("react-compiler-runtime").c(3),e=a.onDismiss;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=[],b[0]=a):a=b[0];m(u,a);b[1]!==e?(a=k.jsx(c("MWXMultiStepDialog.react"),{onClose:function(){d("MWChatEncryptedBackupsLogging").closeDialogCancelFlow({event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,onClose:e})},withCloseButton:!0,children:t}),b[1]=e,b[2]=a):a=b[2];return a}function t(a){return k.jsx(c("MWXDialogPageLoadingState.react"),{})}t.displayName=t.name+" [from "+f.id+"]";function u(){c("InteractionTracing.xplat").getPendingInteractions().forEach(v)}function v(a){a.addAnnotationBoolean("eb_loading_dialog_shown",!0)}function a(a){var e;a=a.mWChatEncryptedBackupsRestoreUpsellMessengerInboxQueryReference;var g=d("CometRelay").usePreloadedQuery(h!==void 0?h:h=b("MWChatEncryptedBackupsUpsellMessengerInboxQuery.graphql"),a),j=o(!1),m=l(function(a){j.current=a},[]),t=(i||(i=c("useReStore")))(),u=c("useEncryptedBackupsProcessStatePreLoaded")({entrypoint:c("MWEBEntrypointsKillswitch.enum").INBOX_INTERSTITIAL,query:g});a=g==null?void 0:(a=g.viewer.messenger_default_encrypted_backup)==null?void 0:a.vesta_user_info;a=c("useMWChatEncryptedBackupsVestaUserInfo")({vestaGetUserInfoResponse$key:a});var v=(e=d("ReQLSuspense").useFirst(function(){return q&&u===2?d("ReQL").fromTableAscending(t.tables.experiences_shared_state).getKeyRange(c("MWEncryptedBackupsLocalStorageEntryEnum").EB_ONBOARDING_DEFER_UPSELL_UNTIL_TIME).map(function(a){a=a.stateValue;var b=Date.now()/1e3;return b<+a?!0:!1}):d("ReQL").empty()},[u,t],f.id+":125"))!=null?e:!1,w=c("useHasRestoreInterstitialSoftblockBeenDismissed")({backupState:u,isCooldownOrLockOutState:a.attemptsRemaining===0||a.loginTimeoutRemainingSecs!=null&&a.loginTimeoutRemainingSecs>0});e=p(g.viewer.is_eb_restore_upsells_dismissed===d("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.ALL_DISMISSED);var x=e[0],y=e[1];return n(function(){if(x)return null;if(u===4||j.current===!0){var a=d("MWEBUseLocalStorage").mwEBGetIsLocalStorageEntryValuePresent(c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_TURN_OFF_SECURE_STORAGE);return b("cr:4181")==null||a||w?null:k.jsx(c("BaseModal.react"),{blockKeyCommands:!0,stackingBehavior:"above-everything",children:k.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWEBRestoreInterstitialDialogWrapper",children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(s,{onDismiss:function(){y(!0),r(t)}}),name:"MWChatEncryptedBackupsUpsellMessengerInbox.RestoreInterstitialDialog",children:k.jsx(b("cr:4181"),{query:g,setIsClosed:y,setIsDialogPersisted:m,setIsDismissed:function(){return r(t)}})})})})}else if(b("cr:8727")&&u===2&&v===!1)return k.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWChatEncryptedBackupsUpsellMessengerInbox.OnboardingInterstitialDialog",children:k.jsx(b("cr:8727"),{onClose:function(){return y(!0)},query:g})});return null},[x,u,v,w,g,m,t])}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEBRestoreInterstitialDialogWrapperDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWEBRestoreInterstitialDialogWrapper.react").__setRef("MWEBRestoreInterstitialDialogWrapperDeferred.react"));function a(a){return i.jsx(j,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxInfoCopyLinkPublicChat.react",["fbt","I64","LSIntEnum","MWInboxInfoButton.react","MWPBumpEntityKey","MWXIconForListCell.react","MWXIconLink","ReQL","ReQLSuspense","cometPushToast","react","react-compiler-runtime","useCopyText","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));l.useCallback;function a(a){var b=d("react-compiler-runtime").c(14),e=a.threadKey,g=(i||(i=c("useReStore")))();b[0]!==g.tables.threads||b[1]!==e?(a=function(){return d("ReQL").fromTableAscending(g.tables.threads,["threadInviteLink","threadInvitesEnabledV2"]).getKeyRange(e)},b[0]=g.tables.threads,b[1]=e,b[2]=a):a=b[2];var l;b[3]!==g||b[4]!==e?(l=[g,e],b[3]=g,b[4]=e,b[5]=l):l=b[5];a=d("ReQLSuspense").useFirst(a,l,f.id+":33");l=a==null?void 0:a.threadInviteLink;var n;b[6]!==l?(n={value:l},b[6]=l,b[7]=n):n=b[7];n=c("useCopyText")(n);var o=n[2];b[8]!==o?(n=function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","copy_link"),o(),d("cometPushToast").cometPushSimpleToast(h._(/*BTDS*/"__JHASH__NNt0oNKP6tq__JHASH__"))},b[8]=o,b[9]=n):n=b[9];n=n;if(a==null)return null;a=(j||(j=d("I64"))).equal(a.threadInvitesEnabledV2,(k||(k=d("LSIntEnum"))).ofNumber(1));if(l==null||!a)return null;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(l=m.jsx(c("MWXIconForListCell.react"),{icon:c("MWXIconLink")}),a=h._(/*BTDS*/"__JHASH__c2UIg9XVAm2__JHASH__"),b[10]=l,b[11]=a):(l=b[10],a=b[11]);b[12]!==n?(l=m.jsx(c("MWInboxInfoButton.react"),{addOnStart:l,label:a,onPress:n}),b[12]=n,b[13]=l):l=b[13];return l}g["default"]=a}),226);
__d("useFetchPendingGroupInvitations",["LSFactory","LSOptimisticFetchPendingGroupInviteStoredProcedure","promiseDone","react","react-compiler-runtime","useMigrateURLParamsToRouteParams","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect;function a(){var a=d("react-compiler-runtime").c(4),b=(h||(h=c("useReStore")))(),e=c("useMigrateURLParamsToRouteParams")();e=e.link_hash;var g=e!=null?String(e):null,i;a[0]!==b||a[1]!==g?(e=function(){g!=null&&c("promiseDone")(b.runInTransaction(function(a){return c("LSOptimisticFetchPendingGroupInviteStoredProcedure")(c("LSFactory")(a),{linkHash:g})},"readwrite",void 0,void 0,f.id+":27"))},i=[b,g],a[0]=b,a[1]=g,a[2]=e,a[3]=i):(e=a[2],i=a[3]);j(e,i);return g}g.useFetchPendingGroupInvitations=a}),98);
__d("useMWCMPausedChannelMemberDialog.react",["Int64Hooks","JSResourceForInteraction","emptyFunction","getValidMediaURL","react-compiler-runtime","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("react-compiler-runtime").c(8),e=a.threadImageUrl,f=a.threadImageUrlExpirationTimestampMs,g=a.threadImageUrlFallback,h=a.threadTitle;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=c("JSResourceForInteraction")("MWCMPausedChannelMemberDialog.react").__setRef("useMWCMPausedChannelMemberDialog.react"),b[0]=a):a=b[0];a=c("useMWXLazyDialog")(a);var i=a[0],j;b[1]!==i||b[2]!==e||b[3]!==f||b[4]!==g||b[5]!==h?(a=function(){if(e==null||g==null||h==null)return[c("emptyFunction"),!1];var a=c("getValidMediaURL")(f,e,g);return[function(){i({threadImageUrl:a,threadTitle:h},c("emptyFunction"))},!0]},j=[i,e,f,g,h],b[1]=i,b[2]=e,b[3]=f,b[4]=g,b[5]=h,b[6]=a,b[7]=j):(a=b[6],j=b[7]);return d("Int64Hooks").useMemoInt64(a,j)}g["default"]=a}),98);
__d("useHandlePublicChatShortlink",["I64","JSResourceForInteraction","LSIntEnum","ReQL","ReQLSuspense","ThreadStatus","promiseDone","react","react-compiler-runtime","useMWCMPausedChannelMemberDialog.react","useMWNavigation","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=k||d("react");var l=b.useEffect,m=b.useRef,n=c("JSResourceForInteraction")("MWJoinPublicChatDialog.react").__setRef("useHandlePublicChatShortlink");function a(a){var b=d("react-compiler-runtime").c(28),e=m(!1),g=m(!1),k=(h||(h=c("useReStore")))(),o=c("useMWXLazyDialog")(n),p=o[0],q;b[0]!==k||b[1]!==a?(o=function(){if(a!=null)return d("ReQL").fromTableAscending(k.tables.group_invitations_pending).getKeyRange(a);else return d("ReQL").empty()},q=[k,a],b[0]=k,b[1]=a,b[2]=o,b[3]=q):(o=b[2],q=b[3]);var r=d("ReQLSuspense").useFirst(o,q,f.id+":43");o=r==null?void 0:r.groupImageUrl;q=r==null?void 0:r.groupImageUrlExpirationTimestampMs;var s=r==null?void 0:r.groupImageUrlFallback,t=r==null?void 0:r.threadTitle,u;b[4]!==o||b[5]!==q||b[6]!==s||b[7]!==t?(u={threadImageUrl:o,threadImageUrlExpirationTimestampMs:q,threadImageUrlFallback:s,threadTitle:t},b[4]=o,b[5]=q,b[6]=s,b[7]=t,b[8]=u):u=b[8];o=c("useMWCMPausedChannelMemberDialog.react")(u);var v=o[0],w=o[1];b[9]!==r?(q=r!=null&&r.threadStatus!=null&&(i||(i=d("I64"))).equal(r.threadStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("ThreadStatus").PAUSED))&&r.linkJoinType!=null&&(i||(i=d("I64"))).equal(r.linkJoinType,(j||(j=d("LSIntEnum"))).ofNumber(5)),b[9]=r,b[10]=q):q=b[10];var x=q,y=c("useMWNavigation")();b[11]!==w||b[12]!==k||b[13]!==r||b[14]!==x||b[15]!==a||b[16]!==y||b[17]!==p||b[18]!==v?(s=function(){if(r!=null&&(r==null?void 0:r.isSubscribed)){if(r.threadId!=null){var b=r.threadId;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(k.tables.threads).getKeyRange(b)),function(a){a!=null&&y.openInbox({threadKey:b,threadType:a.threadType},"publicChatShortlink")})}}else x&&!g.current?(v(),w&&(g.current=!0)):r!=null&&(r==null?void 0:r.threadTitle.length)>0&&r.linkJoinType!=null&&!(i||(i=d("I64"))).equal(r.linkJoinType,(j||(j=d("LSIntEnum"))).ofNumber(6))&&a!=null&&!e.current&&!x&&(e.current=!0,p({linkHash:a}))},b[11]=w,b[12]=k,b[13]=r,b[14]=x,b[15]=a,b[16]=y,b[17]=p,b[18]=v,b[19]=s):s=b[19];b[20]!==w||b[21]!==r||b[22]!==x||b[23]!==a||b[24]!==y||b[25]!==p||b[26]!==v?(t=[a,p,r,y,v,x,w],b[20]=w,b[21]=r,b[22]=x,b[23]=a,b[24]=y,b[25]=p,b[26]=v,b[27]=t):t=b[27];l(s,t)}g["default"]=a}),98);